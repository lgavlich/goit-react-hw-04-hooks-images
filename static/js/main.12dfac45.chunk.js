(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{19:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(5),o=a.n(r),i=(a(19),a(9)),s=a(3);var u={fetchSearch:function(e,t){return fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=23006232-27664577dbbc234e8c464ad7c&image_type=photo&orientation=horizontal&per_page=12")).then((function(t){return t.ok?t.json():Promise.reject(new Error("Request ".concat(e," not found")))}))}},l=a(7),m=(a(20),a(1)),j=function(e){var t=e.onClick;return Object(m.jsx)("div",{className:"Button-Click",children:Object(m.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})})};function b(e){var t=e.onClose,a=e.modalImage.modalImage;Object(n.useEffect)((function(){return window.addEventListener("keydown",c),function(){window.removeEventListener("keydown",c)}}));var c=function(e){"Escape"===e.code&&t()};return Object(m.jsx)("div",{className:"Overlay",onClick:t,children:Object(m.jsx)("div",{className:"Modal",children:Object(m.jsx)("img",{src:a,alt:""})})})}var h=a(10),d=a(11),O=a(14),g=a(13),f=function(e){Object(O.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={imageName:""},e.handleImageName=function(t){e.setState({imageName:t.currentTarget.value.toLowerCase()})},e.handleSubmit=function(t){if(t.preventDefault(),""===e.state.imageName.trim())return l.b.error("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0438\u0439 \u0437\u0430\u043f\u0438\u0442");e.props.onSubmit(e.state.imageName),e.resetForm()},e.resetForm=function(){e.setState({imageName:""})},e}return Object(d.a)(a,[{key:"render",value:function(){return Object(m.jsx)("header",{className:"Searchbar",children:Object(m.jsxs)("form",{onSubmit:this.handleSubmit,className:"SearchForm",children:[Object(m.jsx)("button",{type:"button",className:"SearchForm-button",children:Object(m.jsx)("span",{className:"SearchForm-button-label"})}),Object(m.jsx)("input",{className:"SearchForm-input",type:"text",placeholder:"Search images and photos",value:this.state.imageName,onChange:this.handleImageName})]})})}}]),a}(n.Component),p=function(e){var t=e.id,a=e.webformatURL,n=e.largeImageURL;return Object(m.jsx)("li",{ImageGalleryItem:!0,children:Object(m.jsx)("img",{src:a,alt:"img",className:"ImageGalleryItem-image","data-img":n})},t)},v=function(e){var t=e.images,a=e.onImgClick;return Object(m.jsx)("ul",{className:"ImageGallery",onClick:a,children:t.map((function(e){var t=e.id,a=e.webformatURL,n=e.largeImageURL;return Object(m.jsx)(p,{webformatURL:a,largeImageURL:n},t)}))})},x=a(12),S=a.n(x),w=function(){return Object(m.jsx)("div",{children:Object(m.jsx)(S.a,{type:"Puff",color:"#00BFFF",height:100,width:100})})};function N(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),o=Object(s.a)(r,2),h=o[0],d=o[1],O=Object(n.useState)(1),g=Object(s.a)(O,2),p=g[0],x=g[1],S=Object(n.useState)(!1),N=Object(s.a)(S,2),k=N[0],y=N[1],I=Object(n.useState)(!1),C=Object(s.a)(I,2),L=C[0],F=C[1],E=Object(n.useState)(""),R=Object(s.a)(E,2),U=R[0],B=R[1],G=Object(n.useState)(null),M=Object(s.a)(G,2),T=M[0],q=M[1];Object(n.useEffect)((function(){""!==a&&J()}),[a]);var J=function(){y(!0),u.fetchSearch(a,p).then((function(e){var t=e.hits;d((function(e){return[].concat(Object(i.a)(e),Object(i.a)(t))})),x((function(e){return e+1})),h.length>12&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){return q(e)})).finally((function(){return y(!1)}))},P=function(){F((function(e){return!e}))};return Object(m.jsxs)("div",{children:[k&&Object(m.jsx)(w,{}),T&&Object(m.jsx)("p",{children:T.message}),Object(m.jsx)(l.a,{position:"top-center",autoClose:2e3,newestOnTop:!1,closeOnClick:!0,rtl:!1}),Object(m.jsx)(f,{onSubmit:function(e){e!==a&&(c(e),x(1),d([]),q(null))}}),Object(m.jsx)(v,{images:h,onImgClick:function(e){"IMG"===e.target.nodeName&&(B({modalImage:e.target.dataset.img}),P())}}),h.length>0&&!k&&Object(m.jsx)(j,{onClick:J}),L&&Object(m.jsx)(b,{modalImage:U,onClose:P})]})}o.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(N,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.12dfac45.chunk.js.map